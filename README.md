# Конвертер валют и криптовалют

## Архитектура приложения
├── config.py        - Конфигурация (токены, API-ключи)
├── main.py          - Основная логика бота (обработчики сообщений)
├── extensions.py    - Бизнес-логика (работа с API, кэширование)
└── README.md        - Документация

## Инструкция по установке
1. Установите зависимости:
pip install python-telegram-bot requests

2. Настройте окружение:
export TELEGRAM_TOKEN='ваш_токен'
export OPENEXCHANGE_API_KEY='ваш_ключ'

3. Запустите бота:
python main.py

## Примеры сложных запросов
- 100 USD + 50 EUR в RUB
- (0.5 BTC * 42000) в EUR
- (100 USD * 1.1) / 0.5 ETH в BTC

## Обработка ошибок
При недоступности API используются кэшированные курсы с предупреждением:
> "Курсы из кэша (актуальны на 12:00)"

## Тестирование
Протестированы сценарии:
1. Простые конвертации (фиат/крипто)
2. Сложные математические выражения
3. Ошибочные запросы
4. Недоступность API

хорошо, это текст файла readme.md
пожалуйста перепиши дополни А может даже и скорректирует данный файл в соответствии с всем тем кодом в файлах и функциональность у которой ты увидел, Я давно не обновлял данный файл поэтому там может быть крайне много ошибок

# Конвертер валют и криптовалют

Телеграм-бот для быстрых конвертаций и выражений с поддержкой фиата, криптовалют и математических операций

## Архитектура

- config.py — конфигурация токенов, API-ключей, справочник валют, настройка логирования.
- main.py — точка входа, обработчики команд, пользовательский интерфейс, инлайн- и Reply-клавиатуры.
- extensions.py — ядро бизнес-логики: обработка API, кэширование, нормализация вводимых значений, разбор арифметики.
- README.md — техническая и пользовательская документация.

## Возможности

- Поддержка фиатных и популярных криптовалют (BTC, ETH, LTC, USDT, BNB, XRP, DOGE и др.).
- Обычные и “сленговые” наименования валют, автоматическая нормализация.
- Кэширование обменных курсов (уменьшение нагрузки на API, работа при недоступности внешних сервисов).
- Интерактивный и текстовый режимы работы: поддержка пошаговой конвертации и сложных запросов одной строкой.
- Автоматический учёт комиссии (--commission=X).
- Поддержка сложных арифметических выражений: суммы, произведения, деления, скобки и смешение валют.
- Информативное отображение даты курса.
- Логирование всех действий и ошибок.
- Поддержка всех современных версий Python (3.9+), протестировано на популярных дистрибутивах.

## Установка

1. Установите зависимости:
   
    pip install pyTelegramBotAPI requests
    
2. Настройте переменные окружения:
   
    export TELEGRAM_TOKEN='ваш_токен'
    export OPENEXCHANGE_API_KEY='ваш_ключ'
    
    *Примечание: TELEGRAM_TOKEN может называться BOT_TOKEN в codebase, убедитесь в соответствии с config.py.*

3. Запустите бота:
   
    python main.py
    
## Быстрый старт

- Добавьте бота в Telegram, отправьте /start для просмотра справки и примеров.
- Для интерактивного режима используйте команду /convert и следуйте подсказкам.
- Для быстрого расчёта отправьте:
   
    Доллар Рубль 100
    0.5 BTC в USD
    100 USD + 50 EUR в RUB
    100 USD * 1.08 в BYN
    
- Добавьте комиссию:  
  Эфириум Рубль 1.2 --commission=1.5

## Примеры сложных запросов

- 100 USD + 50 EUR в RUB
- (0.5 BTC * 42000) в EUR
- (100 USD * 1.1) / 0.5 ETH в BTC
- 5000 RUB / 75.5 в USD
- 100 USD to BTC + 0.01 ETH to BTC

Поддерживается использование знаков +, -, *, /, а также ключевых слов в и to для смены целевой валюты.

## Поддерживаемые валюты

Посмотреть актуальный список:  
Команда /values  
(используются официальные коды и их варианты в любом падеже/регистрe)

## Обработка ошибок и кэш

- При ошибках или недоступности API используются кэшированные курсы с пометкой времени (“Курсы из кэша (актуальны на …)”).
- Валидация всех вводимых данных: “незнакомая валюта”, “неверная сумма”, “некорректная комиссия” сопровождаются чёткими сообщениями с примерами правильного ввода.
- Все сбои логируются для последующего анализа.

## Тестирование
Проверены сценарии:
- Прямые конвертации: фиат ⇄ фиат, фиат ⇄ крипто, крипто ⇄ крипто
- Математические выражения с любым количеством валют, скобками и операторами
- Ошибочные и маловероятные пользовательские запросы
- Имитация недоступности API и отказоустойчивость

## Лицензия

---

## Контакты и помощь

- Для справки используйте команду /help в чате с ботом.
- Для обратной связи и багрепортов откройте Issue на GitHub.

Ваша поддержка и контрибьюты приветствуются!

